---
title: 20250117
description: 관계형 데이터베이스와 비관계형 데이터베이스의 차이, GC 알고리즘 기본 개념, 
author: codongmin
date: 2025-01-17
tags: ["database", "gc", "polymorphism"]
---



# 관계형 데이터베이스와 비관계형 데이터베이스 차이 

관계형 데이터베이스(RDB)와 비관계형 데이터베이스는 크게 데이터를 저장하는 방식에 차이가 존재한다. 

관계형 데이터베이스는 컬럼과 로우를 가진 테이블 형태로 데이터를 저장한다. 데이터의 정합성에 주요 초점을 맞추어 데이터 간 중복이 없으며 데이터의 일관성을 주요 관심사로 발전되어왔다. 테이블과 테이블 간에는 관계를 통해서 데이터를 연결할 수 있다. 주로 외래키를 통해 테이블 간 조인방식을 사용한다. 관계형 데이터베이스는 ACID 속성을 통해서 데이터의 무결성과 일관성을 보장하는 방향으로 초점이 맞추어 발전되어 왔다. 관계형 데이터베이스를 조작하기 위해 SQL이라는 쿼리 언어를 사용하여 데이터의 스키마를 정의하기도 하고, 데이터를 조회, 삽입 등 다양한 연산을 수행할 수 있다. 

반면에 비-관계형 데이터베이스는 별도의 스키마가 존재하지 않는다. 데이터의 무결성, 일관성보다 데이터의 양, 속도와 성능 면에 초점을 맞추어 발전되어왔다. 데이터를 정의, 조작하는데 SQL을 사용하지 않아 NOSQL 이라고 부르기도 한다. 중복을 일부 허용하며, 빈번한 구조 변경에도 유연함을 제공할 수 있다는 장점이 존재한다. 구조화되기 어려운 비정형 데이터들을 다루기에 적합하다.

데이터의 무결성과 일관성이 중요한 서비스의 경우 관계형 데이터베이스가 적합하고 (주로 트랜잭션 처리가 필요한 애플리케이션 서버의 경우), 데이터의 스키마가 자주 변경되거나, 많은 양의 데이터를 저장해야하는 경우에는 비관계형 데이터베이스가 적합할 수 있다. 두 데이터베이스는 데이터의 일관성과 유연함이라는 두 트레이드 오프사이에서 관심을 두는 방향이 다른 데이터베이스 이므로 상황에 더 적합한 데이터베이스를 선택하는 것이 중요하다.



# 다형성과 코드의 재사용관계 

다형성이란 동일한 객체가 다르게 동작하는 특성을 말한다. 조금 더 구체적으로 설명하면 동일한 메소드를 호출하더라도 구현 객체의 타입에 따라 다르게 동작하는 특성을 말한다. 이는 상속과 인터페이스를 통한 추상화를 통해서 다형성을 구현할 수 있다. 추상화는 다형성의 기반이 된다. 런타임시에 동적 바인딩을 통해 구체 타입의 메소드를 실행한다. 추상화는 "무엇을 해야하는지"를 정의하고 다형성은 "어떻게 할 것인지"를 각 객체가 결정하도록 함.

코드의 재사용이란, 단순히 코드의 중복만을 의미하는 것이 아닌. 코드를 다양한 상황에서 다시 활용할 수 있는 것을 말한다. 다형성이란 특성 덕분에 동일한 인터페이스를 재사용해 상속받은 기능을 그대로 사용하거나, 확장해서 사용할 수 있다. 



# GC 알고리즘 기반

JVM에서는 Mark and Sweep 이라는 방식으로 회수해야할 인스턴스들으르 판별하고 정리한다. 

Heap 영역은 참조형 타입들이 위치하는 공간이다. Stack의 경우에는 메소드의 종료와 함께 스택프레임이 반환되면서 메소드 스코프 안의 지역변수나 매개변수들이 메모리에서 정리되지만, Heap 런타임 데이터 영역은 GC에 의해서 메모리가 회수되는 방식을 사용한다. 또 다른 회수 대상을 판별하는 방식에는 참조카운팅 방식이 존재한다. 이 방식은 객체를 참조하는 수 만큼 카운팅을 하는 방식으로, 더 이상 참조카운트가 존재하지 않는 경우 메모리 회수 대상으로 지정한다. Mark and Sweep 방식은 참조가 시작되는 곳부터 참조를 타고 들어가며 객체들을 Mark 하고 더 이상 참조 연결이 되지 않는 대상들을(도달 가능성이 없는) 사용하지 않는 객체로 간주해 메모리 회수 대상으로 판단, 회수를 진행한다. 객체 도달 가능성 분석이라고 한다. 



<img src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/4a/Animation_of_the_Naive_Mark_and_Sweep_Garbage_Collector_Algorithm.gif/330px-Animation_of_the_Naive_Mark_and_Sweep_Garbage_Collector_Algorithm.gif">

이렇게 참조의 시발점이 되는 대상을 루트 객체라고 한다. GC의 루트 객체가 될 수 있는 객체들은 스택에 존재하는 로컬 변수(참조변수) 및 메소드의 매개변수, 혹은 JNI의 참조, JVM 내부 캐시에서 관리하는 객체, 클래스의 정적 멤버가 될 수 있다. 

Mark and Sweep 방식의 경우 회수 대상 객체들이 회수된 이후에 중간 중간 빈 메모리 공간들이 생기게 되는 데 이 공간들을 슬랙영역이라고 한다. 슬랙 영역이 군데 군데 생김으로써 메모리 공간이 효율적으로 사용되지 못하는 현상을 메모리 단편화 현상이라고 한다. 메모리 빈공간은 많으나 연속적이지 않아 새로운 메모리 공간을 사용할 수 없어 메모리 사용효율이 떨어지는 현상을 말한다. 

이러한 단점을 해결하기 위해 Mark and Compact 방식이 개선 방안으로 셍겨났다. Sweep 이후에 단편화된 메모리 공간을 압축시켜 연속된 빈 메모리 공간을 만드는 방식이다. 
