---
title: 가상메모리란
description: 
author: codongmin
date: 2025-05-20
categories:
  - os
tags: 
image:
  path: /assets/img/thumbnail/.png
  lqip: 
  alt: 이미지 설명
---


## 가상메모리란?

프로세스가 물리 메모리(실제 메모리)의 크기와 상관없이 메모리를 이용할 수 있도록 지원하는 기술.
가상 메모리 개념의 등작으로 물리 메모리의 크기에 구애받지 않고 작업할 수 있게 됨. 

가상메모리 덕분에 크기가 서로 다른 물리 메모리에서 일관되게 프로세스를 실행할 수 있다.

예를 들어 실행하는 데 2G의 메모리 공간을 필요로하는 프로그램이 있다고 했을때, 
A 컴퓨터는 총 3G의 메모리를 탑재하고 있고, B 컴퓨터는 1GB의 메모리를 가지고 있다면 이 프로그램은 B 컴퓨터에서는 실행이 불가능한다. 프로그램의 실행을 위해 실제 사용 가능한 메모리를 고려하며 프로그래밍을 해야만 한다.

하지만 가상 메모리리 개념이 이 프로그램을 A 컴퓨터이든, B 컴퓨터이든 실행이 가능하게 만들어준다.
가상 메모리는 물리메모리의 크기에 제약받지 않게, 프로세스에게 메모리 공간을 제공해주는 기술이다. 이 가상 메모리 기술 덕분에 프로세스는 물리메모리의 크기가 어느정도인지 신경쓰지 않고 메모리를 사용할 수 있다.


가상 메모리 시스템에서 모든 프로세스는 0번이라는 메모리 주소부터 시작하는 연속된 메모리 공간을 가지게된다.

## 가상메모리의 크기 

이론적으로 가상메모리의 크기는 무한함. 
그러나 실제로 가상 메모리의 최대 크기는 컴퓨터시스템이 가진 물리 메모리의 최대 크기로 한정됨. 이는 CPU의 비트에 따라 결정된다. (32비트, 68비트)

🤔 가상메모리의 크기는 어떻게 시스템이 가진 물리 메모리를 넘어서더라도 사용이 가능할까?

그렇게 할 수 있는 방법은 바로 스왑(Swap) 기법 덕분이다. 

예를 들어 현재 시스템(32bit)의 물리 메모리의 최대 크기가 4GB라고 할때, 각각의 4GB씩의 주소공간을 필요로 하는 프로세스 3개가 있다고 가정해보자. 만약 이 3개의 프로세스를 동시에 실행하려면 이론상 총 12GB의 메모리 공간이 필요로 한다. 

이때 가상메모리 시스템에서는 부족한 4GB의 물리메모리에 12GB를 필요로하는 프로세스를 우겨넣는 것이 아니라(불가능), 수행하는 일부 메모리 내용을 하드디스크의 공간에 잠깐 옮겨놓는다. 이 공간을 스왑 영역이라고 한다. 

이 스왑영역은 하드디스크 영역에 존재하긴 하지만, 메모리 관리자에 의해 관리되는 영역으로 메모리 공간의 일부로 취급된다. 마치 하드디스크를 잠시 보관하는 서랍처럼 사용하는 것과 비슷하다. 이 공간을 논리적으로 메모리 공간처럼 사용하는 것이다. 그래서 가상메모리의 크기는 물리 메모리(4GB) + 스왑영역의 크기가 된다.

이때 메모리 관리자는 물리 메모리가 실제로 꽉찼을때 (4GB), 일부 프로세스들을 스왑영역으로 보내는데, 이를 **스왑-아웃**이라고 부른다. 반대로 물리 메모리 공간이 널널해지면, 스왑 영역에 있는 프로세스들을 다시 가져오는데 이를 **스왑-인**이라고 부른다.

이렇게 되면 프로세스 입장에서는 논리적인 가상 주소를 부여받고, 물리 메모리로부터 필요한 4GB를 온전히 할당하고 있는 것처럼 보이게된다. 프로세스가 가상 주소에 데이터를 저장하더라도, 실제로 어딘가에는 데이터가 저장되어야 하는데, 이를 위해 메모리 관리자는 프로세스가 사용하는 가상의 주소를 실제 물리주소로 변환해주는 작업을 해준다. 이런 작업을 동적 주소 변환(DAT, Dynamic Address Translation)이라고 한다.


### 정리 
- 이론적으로 가상메모리의 크기는 무한하다. 
- 하지만 실제로 가상메모리의 최대 크기는 컴퓨터 시스템이 가진 물리 메모리의 최대 크기로 한정된다.
- 물리 메모리가 부족할때 사용하지 않는 데이터를 하드디스크의 일부 영역에 옮기는 기술을 스왑이라한다.
- 이때 하드디스크의 일부 영역을 스왑영역이라 한다.
- 프로세스의 가상 주소를 실제 물리주소로 변환하는 작업을 동적 주소 변환이라 한다.
- 메모리 관리자는 메모리에 관련된 처리를 도와준다.